(this["webpackJsonpandys-nft-burner"]=this["webpackJsonpandys-nft-burner"]||[]).push([[0],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return m}));var r=n(9),a=n(3),c=n.n(a),o=n(14),i=n(93),s=n(71),u=n(8),l=n(449),d=n(420),b=new l.a([["instructionDiscriminator",d.a]],"BurnNftInstructionArgs");var f=5;function p(e,t){return t.masterEditionAccount?[h(e,t)]:function(e,t){var n=[];if(t.amount){var r=i.b.createBurnInstruction(i.a,t.mint,t.tokenAccount,e,[],t.amount);n.push(r)}var a=i.b.createCloseAccountInstruction(i.a,t.tokenAccount,e,e,[]);return n.push(a),n}(e,t)}function h(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),n=b.serialize({instructionDiscriminator:29}),r=Object(u.a)(n,1)[0],a=[{pubkey:e.metadata,isWritable:!0,isSigner:!1},{pubkey:e.owner,isWritable:!0,isSigner:!0},{pubkey:e.mint,isWritable:!0,isSigner:!1},{pubkey:e.tokenAccount,isWritable:!0,isSigner:!1},{pubkey:e.masterEditionAccount,isWritable:!0,isSigner:!1},{pubkey:e.splTokenProgram,isWritable:!1,isSigner:!1}];return null!=e.collectionMetadata&&a.push({pubkey:e.collectionMetadata,isWritable:!0,isSigner:!1}),new o.TransactionInstruction({programId:t,keys:a,data:r})}({metadata:t.metadataAccount,owner:e,mint:t.mint,tokenAccount:t.tokenAccount,masterEditionAccount:t.masterEditionAccount,splTokenProgram:i.a,collectionMetadata:t.collectionMetadataAccount},s.a);return n}function j(e){var t;return e.tokenAccountLamports+(e.masterEditionAccountLamports?e.masterEditionAccountLamports+(null!==(t=e.metadataAccountLamports)&&void 0!==t?t:0):0)}function m(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(c.a.mark((function e(t,n,r,a){var i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=[],s=n,u=function(){for(var e=new o.Transaction,n=0,c=0;c<f;c++){var u=s.pop();if(!u)break;n+=j(u),p(t,u).forEach((function(t){return e.add(t)}))}if(a){var l=Math.floor(n*(null!==r&&void 0!==r?r:0)/100),d=o.SystemProgram.transfer({fromPubkey:t,toPubkey:a,lamports:l});e.add(d)}i.push(e)};s.length>0;)u();return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},269:function(e,t,n){},270:function(e,t){},272:function(e,t){},295:function(e,t){},296:function(e,t){},333:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(0),i=n.n(o),s=n(32),u=n.n(s),l=(n(269),n(77)),d=n(14),b=n(443),f=n(444),p=n(445),h=n(433),j=n(434),m=n(446),x=n(441),O=n(159),v=n(234),g=n(435),k=n(20),y=n(27),w=n(9),A=n(8),S=n(54),C=n(3),P=n.n(C),M=n(427),T=n(417),E=n(442),N=n(129),B=n(439),I=n(438),L=n(428),U=n(436),R=n(220),W=n(71),K=n(106),F=n(421),D=n(418),z=n(2),Y=function(e){var t=e.tokenMetas,n=e.selectionModel,r=t?Math.ceil((null===t||void 0===t?void 0:t.length)/K.a):0;return Object(z.jsx)(F.a,{container:!0,direction:"row",justifyContent:"center",wrap:"nowrap",children:Object(z.jsx)(F.a,{container:!0,direction:"row",wrap:"nowrap",children:t&&Object(z.jsxs)(F.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(z.jsxs)(F.a,{container:!0,direction:"column",children:[Object(z.jsx)(D.a,{variant:"body2",color:"textSecondary",children:"NFTs"}),Object(z.jsx)(D.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"".concat(Object(W.b)(t)," / ").concat(null===t||void 0===t?void 0:t.length)})]}),Object(z.jsxs)(F.a,{container:!0,direction:"column",children:[Object(z.jsx)(D.a,{variant:"body2",color:"textSecondary",children:"Your selection"}),Object(z.jsx)(D.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:_(n?Object(W.f)(Object(W.d)(t,n)):0)})]}),Object(z.jsxs)(F.a,{container:!0,direction:"column",children:[Object(z.jsx)(D.a,{variant:"body2",color:"textSecondary",children:"You can redeem"}),Object(z.jsx)(D.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:_(Object(W.f)(t))}),(null===t||void 0===t?void 0:t.length)>0&&Object(z.jsxs)(D.a,{variant:"body2",color:"textSecondary",children:["in ","".concat(r)," transaction",1!==r&&"s"]})]})]})})})},_=function(e){return"\u25ce ".concat(e.toFixed(3))},q=n(415),H=n(422),G=Object(N.a)(q.a)(r||(r=Object(S.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #ff0000 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),J=function(e){var t=e.onClick,n=e.tokenMetas,r=e.selectionModel,a=Object(o.useState)(!1),c=Object(A.a)(a,2),i=c[0],s=c[1];return Object(z.jsx)(G,{disabled:i||0===(null===n||void 0===n?void 0:n.length)||!r||0===(null===r||void 0===r?void 0:r.length),onClick:Object(w.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,t();case 3:s(!1);case 4:case"end":return e.stop()}}),e)}))),variant:"contained",children:i?Object(z.jsx)(H.a,{}):0===(null===n||void 0===n?void 0:n.length)?"NOTHING TO BURN":r&&0!==(null===r||void 0===r?void 0:r.length)?"BURN SELECTION":"SECECT TOKENS TO BURN"})},Q=n(447),V=Object(N.a)(O.a)(a||(a=Object(S.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),X=N.a.div(c||(c=Object(S.a)([""]))),Z=[{field:"id",headerName:"image",width:80,renderCell:function(e){var t=e.row.imageUrl;return Object(z.jsx)("img",{src:t,alt:"",width:60})}},{field:"name",headerName:"name",width:150},{field:"amount",headerName:"amount",width:70},{field:"tokenAccountLamports",headerName:"reclaimable",width:90,renderCell:function(e){var t=Object(K.c)(e.row);return _(t/d.LAMPORTS_PER_SOL)}},{field:"mint",headerName:"mint",width:400,renderCell:function(e){var t=e.row.mint.toBase58();return Object(z.jsx)(Q.a,{href:Object(W.e)(t),target:"_blank",children:t})}},{field:"url",headerName:"metadata",width:400,renderCell:function(e){var t=e.row.url;return Object(z.jsx)(Q.a,{href:t,target:"_blank",children:t})}}],$=function(e){var t=e.connection,n=Object(o.useState)(),r=Object(A.a)(n,2),a=r[0],c=r[1],i=Object(o.useState)({open:!1,message:"",severity:void 0}),s=Object(A.a)(i,2),u=s[0],l=s[1],d=Object(o.useState)(),b=Object(A.a)(d,2),f=b[0],p=b[1],h=Object(o.useState)(2),j=Object(A.a)(h,2),m=j[0],x=j[1],O=Object(R.b)();Object(o.useEffect)((function(){Object(w.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&O.publicKey){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(W.c)(t,O.publicKey);case 4:n=e.sent,c(n);case 6:case"end":return e.stop()}}),e)})))()}),[O,t]);var v=function(){var e=Object(w.a)(P.a.mark((function e(n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"confirmed");case 2:(r=e.sent).value.err?l({open:!0,message:r.value.err.toString(),severity:"warning"}):l({open:!0,message:"Successfully burned and recovered some SOL!",severity:"success"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var n=Object(w.a)(P.a.mark((function n(){var r,c,o,i,s,u,d,b,p,h,j,x,g;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(O&&O.publicKey&&a&&a.length>0)){n.next=58;break}return r=[],f&&(console.log(f.length+" tokens selected."),r=Object(W.d)(a,f)),n.next=6,Object(K.b)(O.publicKey,r,m,e.donationAddress);case 6:if(c=n.sent,!O.signAllTransactions){n.next=38;break}return n.next=10,t.getLatestBlockhash();case 10:return o=n.sent,c.forEach((function(e){e.recentBlockhash=o.blockhash,e.feePayer=O.publicKey})),n.next=14,O.signAllTransactions(c);case 14:i=n.sent,console.log("user has signed "+i.length+" transactions"),s=Object(y.a)(i),n.prev=17,s.s();case 19:if((u=s.n()).done){n.next=28;break}return d=u.value,n.next=23,t.sendRawTransaction(d.serialize(),{skipPreflight:!1});case 23:b=n.sent,console.log(b),v(b);case 26:n.next=19;break;case 28:n.next=33;break;case 30:n.prev=30,n.t0=n.catch(17),s.e(n.t0);case 33:return n.prev=33,s.f(),n.finish(33);case 36:n.next=58;break;case 38:p=Object(y.a)(c),n.prev=39,p.s();case 41:if((h=p.n()).done){n.next=50;break}return j=h.value,n.next=45,O.sendTransaction(j,t);case 45:x=n.sent,console.log(x),v(x);case 48:n.next=41;break;case 50:n.next=55;break;case 52:n.prev=52,n.t1=n.catch(39),p.e(n.t1);case 55:return n.prev=55,p.f(),n.finish(55);case 58:n.next=65;break;case 60:n.prev=60,n.t2=n.catch(0),g=n.t2.msg||"Burning failed!",console.trace(),l({open:!0,message:g,severity:"error"});case 65:return n.prev=65,n.finish(65);case 67:case"end":return n.stop()}}),n,null,[[0,60,65,67],[17,30,33,36],[39,52,55,58]])})));return function(){return n.apply(this,arguments)}}();return Object(z.jsxs)(M.a,{style:{marginTop:100},children:[Object(z.jsx)(M.a,{maxWidth:"xs",style:{position:"relative"},children:Object(z.jsxs)(T.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:[Object(z.jsx)("h1",{children:"NFT Burner"}),O.connected?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Y,{tokenMetas:a,selectionModel:f}),Object(z.jsxs)(X,{children:[Object(z.jsxs)(L.a,{spacing:2,direction:"row",alignItems:"center",children:[Object(z.jsx)("p",{children:"Donate:"}),Object(z.jsx)(I.a,{"aria-label":"Donation Percentage",step:1,min:0,max:100,onChange:function(e,t){x(t)},color:"secondary"}),Object(z.jsxs)("p",{children:[m,"%"]})]}),Object(z.jsx)("p",{style:{color:"red"},children:"Warning: this process is irreversible!"}),Object(z.jsx)(J,{tokenMetas:a,selectionModel:f,onClick:g})]})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("p",{children:["Best practice: don't user your main wallet!",Object(z.jsx)("br",{})," use a burner wallet!"]}),Object(z.jsx)(V,{children:"Connect Wallet"})]}),Object(z.jsx)("p",{style:{color:"gray"},children:"developed and maintained by solandy.sol"}),Object(z.jsxs)("p",{style:{color:"gray"},children:["follow me on ",Object(z.jsx)("a",{href:"https://twitter.com/HeyAndyS",children:"Twitter"})," and ",Object(z.jsx)("a",{href:"https://www.youtube.com/channel/UCURIDSvXkuDf9XXe0wYnoRg",children:"YouTube"})]})]})}),O.connected&&a&&a.length>0?Object(z.jsx)("div",{style:{width:"100%"},children:Object(z.jsx)(U.a,{sx:{color:"white",border:2},autoHeight:!0,rows:a,columns:Z,checkboxSelection:!0,selectionModel:f,onSelectionModelChange:p})}):Object(z.jsx)("p",{children:"No tokens found."}),Object(z.jsx)(E.a,{open:u.open,autoHideDuration:6e3,onClose:function(){return l(Object(k.a)(Object(k.a)({},u),{},{open:!1}))},children:Object(z.jsx)(B.a,{onClose:function(){return l(Object(k.a)(Object(k.a)({},u),{},{open:!1}))},severity:u.severity,children:u.message})})]})},ee=Object(v.a)({palette:{type:"dark"}}),te="mainnet-beta",ne="https://ssc-dao.genesysgo.net/",re=new l.b.PublicKey("ABrn3yqNQGpFR4LbBNzDN7i6RUPwaJCZV1iVV8FaNuNi"),ae=new l.b.Connection(ne),ce=function(){var e=Object(o.useMemo)((function(){return Object(d.clusterApiUrl)(te)}),[]),t=Object(o.useMemo)((function(){return[Object(b.a)(),Object(f.a)(),Object(p.a)(),Object(h.a)({network:te}),Object(j.a)({network:te})]}),[]);return Object(z.jsx)(g.a,{theme:ee,children:Object(z.jsx)(m.a,{endpoint:e,children:Object(z.jsx)(x.a,{wallets:t,autoConnect:!0,children:Object(z.jsx)(O.b,{children:Object(z.jsx)($,{connection:ae,rpcHost:ne,donationAddress:re})})})})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,453)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};n(333);u.a.render(Object(z.jsx)(i.a.StrictMode,{children:Object(z.jsx)(ce,{})}),document.getElementById("root")),oe()},71:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return w}));var r=n(27),a=n(9),c=n(3),o=n.n(c),i=n(14),s=n(77),u=n(93),l=n(106);function d(e){return"https://solscan.io/address/"+e}var b=new s.b.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function f(e){return e.map((function(e){return Object(l.c)(e)})).reduce((function(e,t){return e+t}),0)/i.LAMPORTS_PER_SOL}function p(e){return e?e.filter((function(e){return e.masterEditionAccount})).length:0}function h(e,t){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(o.a.mark((function e(t,n){var a,c,s,l,d,b,f,p,h,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenAccountsByOwner(n,{programId:u.a});case 2:a=e.sent,c=0,s=[],l=Object(r.a)(a.value),e.prev=6,l.s();case 8:if((d=l.n()).done){e.next=21;break}for(b=d.value,64,f=0,p=0;p<8;p++)f+=b.account.data[64+p]*Math.pow(2,8*p);return h=new i.PublicKey(b.account.data.slice(0,32)),j={id:c,tokenAccount:b.pubkey,tokenAccountLamports:b.account.lamports,mint:h,amount:f},s.push(j),c++,e.next=19,O(t,j);case 19:e.next=8;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),l.e(e.t0);case 26:return e.prev=26,l.f(),e.finish(26);case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,null,[[6,23,26,29]])})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),n.toBuffer()],b);case 2:return r=t.sent,a=r[0],t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(e,t){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(o.a.mark((function t(n,r){var a,c,i,u,l,d,f,p,h,j,x,O,v;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(r.mint);case 2:return a=t.sent,t.next=5,n.getAccountInfo(a);case 5:if(!(c=t.sent)){t.next=48;break}r.metadataAccount=a,r.metadataAccountLamports=c.lamports,i=c.data.slice(69,101),u=c.data.readUInt32LE(65),l="",d=0;case 13:if(!(d<u)){t.next=20;break}if(0!==i.readUInt8(d)){t.next=16;break}return t.abrupt("break",20);case 16:l+=String.fromCharCode(i.readUInt8(d));case 17:d++,t.next=13;break;case 20:r.name=l,115,f=c.data.slice(119,319),p=c.data.readUInt32LE(115),h="",j=0;case 26:if(!(j<p)){t.next=33;break}if(0!==f.readUInt8(j)){t.next=29;break}return t.abrupt("break",33);case 29:h+=String.fromCharCode(f.readUInt8(j));case 30:j++,t.next=26;break;case 33:if(h.length>0&&(r.url=h),k(r),r.collectionMint=g(c),!r.collectionMint){t.next=40;break}return t.next=39,m(r.collectionMint);case 39:r.collectionMetadataAccount=t.sent;case 40:return t.next=42,s.b.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),r.mint.toBuffer(),e.from("edition")],b);case 42:return x=t.sent,O=x[0],t.next=46,n.getAccountInfo(O);case 46:(v=t.sent)&&(r.masterEditionAccount=O,r.masterEditionAccountLamports=v.lamports);case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(e){var t=e.data[321],n=t?e.data[322]:0,r=322+(t?4+34*n:0)+2,a=r+(e.data[r]?2:1),c=a+(e.data[a]?2:1);if(e.data[c]){var o=e.data[c+1],s=new i.PublicKey(e.data.slice(c+2,c+2+32));return o?s:void 0}}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(t.url,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:return(r=e.sent).image&&(t.imageUrl=r.image),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return e.filter((function(e){return!t||t.includes(e.id)}))}}).call(this,n(24).Buffer)}},[[334,1,2]]]);
//# sourceMappingURL=main.65d5f31b.chunk.js.map